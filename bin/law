#!/usr/bin/env ruby

require 'gli'
require 'law'
require 'nokogiri'

module CLI
  extend GLI::App
  version Law::VERSION

  flag ["data", "d"], arg_name: "DIR", desc: "law data directory", default_value: "../laws"

  command "parse" do |c|
    c.action do |global_options,options,args|
      directory = global_options[:data]

      raise "#{directory} must be a directory" unless File.directory?(directory)

      Dir[File.join(directory, "**/*.xml")].each do |fname|
        p fname

        xml = Nokogiri::XML(fname)



        # Law::Parser.new(global_options[:data])
      end


    end
  end
end

exit CLI.run(ARGV.dup)
